<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מסכמים ופותחים את הלב - משחק אינטראקטיבי</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Heebo', sans-serif;
            /* --- COLOR CHANGE: New background gradient --- */
            background: linear-gradient(135deg, #a4c2d0 0%, #d4e2e8 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logos-container {
            max-width: 600px; 
            width: 100%;
            margin: 0 auto 25px; 
        }
        
        .title {
            font-size: 2.5em;
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            font-size: 1.5em;
            font-weight: 500;
            color: #718096;
            margin-bottom: 25px;
        }

        .small-hero-image-container {
            width: 100%;
            max-width: 300px;
            margin: 0 auto 30px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(224, 84, 54, 0.2);
            border: 3px solid white;
        }

        .small-hero-image {
            width: 100%;
            height: auto;
            display: block;
        }
        
        .category-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .category-card {
            /* --- COLOR CHANGE: Button color matches the background --- */
            background: linear-gradient(135deg, #a4c2d0 0%, #8ca9b8 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            box-shadow: 0 10px 20px rgba(164, 194, 208, 0.3);
        }
        
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(164, 194, 208, 0.5);
        }
        
        .category-card h3 {
            font-size: 1.4em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .category-description {
            font-size: 0.95em;
            opacity: 0.9;
            margin-bottom: 15px;
        }
        
        .category-examples {
            font-size: 0.85em;
            opacity: 0.8;
            font-style: italic;
        }
        
        .instructions {
            background: #f7fafc;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            /* --- COLOR CHANGE: Border color matches the heart --- */
            border-right: 5px solid #e05436;
        }
        
        .instructions h3 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.6em;
            font-weight: 700;
            text-align: center;
        }
        
        .summary-info {
            display: grid;
            grid-template-columns: 1fr;
            max-width: 400px;
            margin: 0 auto 30px;
        }

        .info-field {
            display: flex;
            flex-direction: column;
        }
        
        .info-field label {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        .info-field select {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1em;
            font-family: 'Heebo', sans-serif;
            transition: border-color 0.3s ease;
            width: 100%;
            background-color: white;
        }
        
        .info-field select:focus {
            outline: none;
            border-color: #e05436;
        }

        .instructions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .instruction-item {
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            /* --- COLOR CHANGE: Border color matches the background --- */
            border-right: 3px solid #a4c2d0;
            display: flex;
            flex-direction: column; 
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 5px; 
            min-height: 110px;
        }

        .instruction-number {
            font-size: 1.8em;
            font-weight: 700;
            color: #e05436; /* Heart color */
            line-height: 1;
        }
        
        .instruction-text {
            font-size: 1em;
            color: #4a5568;
            line-height: 1.4;
        }

        .instructions-aspects ul {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .instructions-aspects li {
            background: #eef2ff;
            color: #4338ca;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
            flex-shrink: 0;
        }
        
        .instructions-controls {
            text-align: center;
            margin-top: 20px;
        }
        
        .card-display {
            display: none;
            text-align: center;
            margin-top: 30px;
        }
        
        .card {
            background: linear-gradient(135deg, #a4c2d0 0%, #8ca9b8 100%);
            color: white;
            padding: 40px;
            border-radius: 20px;
            font-size: 2.5em;
            font-weight: 600;
            margin: 20px auto;
            max-width: 400px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        
        .control-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Heebo', sans-serif;
            color: white;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #a4c2d0 0%, #8ca9b8 100%);
            box-shadow: 0 5px 15px rgba(164, 194, 208, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(164, 194, 208, 0.6);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.4);
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(72, 187, 120, 0.6);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #e05436 0%, #c44a2f 100%);
            box-shadow: 0 5px 15px rgba(224, 84, 54, 0.4);
        }
        
        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(224, 84, 54, 0.6);
        }
        
        .card-back {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            color: #2d3748;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px dashed #cbd5e0;
        }
        
        .reflection-screen {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .reflection-container {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }
        
        .word-circle {
            width: 200px;
            height: 200px;
            border: 3px solid #e2e8f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #e05436 0%, #c44a2f 100%);
            box-shadow: 0 15px 40px rgba(224, 84, 54, 0.3);
            flex-shrink: 0;
            margin-bottom: 10px;
        }
        
        .word-text {
            font-size: 2em;
            font-weight: 700;
            color: white;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .reflection-instruction {
            font-size: 1.1em;
            color: #4a5568;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 auto;
        }

        .aspects-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 500px;
            width: 100%;
            perspective: 1000px;
        }
        
        .aspect-item {
            position: relative;
            min-height: 180px; 
            cursor: pointer;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .aspect-item.is-flipped {
            transform: rotateY(180deg);
        }

        .aspect-front, .aspect-back {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 12px;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            border: 2px solid #f1f5f9;
        }
        
        .aspect-front {
            background: white;
        }

        .aspect-back {
            background: linear-gradient(135deg, #e6f3ff 0%, #f0f8ff 100%);
            transform: rotateY(180deg);
            border-color: #8ca9b8;
            text-align: right;
            align-items: flex-start;
            justify-content: flex-start;
            font-size: 0.9em;
        }

        .aspect-back-title {
            font-size: 1.2em;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 8px;
            width: 100%;
            text-align: center;
        }

        .aspect-back ul {
            list-style: none;
            padding-right: 10px;
            margin: 0;
            color: #4a5568;
        }
        
        .aspect-back li {
            position: relative;
            padding-right: 15px;
            line-height: 1.5;
            margin-bottom: 4px;
        }

        .aspect-back li::before {
            content: '•';
            position: absolute;
            right: 0;
            color: #8ca9b8;
        }

        .aspect-icon {
            font-size: 2.2em;
            margin-bottom: 8px;
        }
        
        .aspect-title {
            font-weight: 600;
            color: #2d3748;
            font-size: 1.1em;
        }
        
        .choice-screen {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .choice-title {
            text-align: center;
            font-size: 1.8em;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 30px;
        }
        
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            max-height: 500px;
            overflow-y: auto;
            padding: 10px;
            border: 2px solid #f1f5f9;
            border-radius: 15px;
            background: #fafafa;
        }
        
        .choice-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e2e8f0;
            font-weight: 500;
            color: #2d3748;
        }
        
        .choice-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            border-color: #a4c2d0;
            background: #f8faff;
        }
        
        .choice-controls {
            text-align: center;
            margin-top: 20px;
        }
        
        .reflection-controls {
            text-align: center;
            flex-shrink: 0;
            margin-top: 10px;
        }
        
        .back-button {
            background: linear-gradient(135deg, #718096 0%, #4a5568 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 10px;
        }
        
        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(113, 128, 150, 0.4);
        }
        
        .flip-animation {
            animation: flip 0.6s ease-in-out;
        }
        
        @keyframes flip {
            0% { transform: rotateY(0deg); }
            50% { transform: rotateY(90deg); }
            100% { transform: rotateY(0deg); }
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            .title {
                font-size: 1.8em;
            }
            .subtitle {
                font-size: 1.2em;
            }
            .logos-container {
                margin-bottom: 20px;
            }
            .card {
                font-size: 1.8em;
                padding: 25px;
            }
            .control-buttons {
                flex-direction: column;
                align-items: center;
            }
            .btn {
                width: 100%;
                max-width: 200px;
                margin: 5px 0;
            }
            .word-circle {
                width: 150px;
                height: 150px;
            }
            .word-text {
                font-size: 1.5em;
            }
            .reflection-instruction {
                font-size: 1em;
            }
            .aspects-grid {
                grid-template-columns: 1fr;
                gap: 10px;
                max-width: 300px;
            }
            .aspect-item {
                min-height: 150px;
            }
            .aspect-back {
                font-size: 0.8em;
            }
            .aspect-icon {
                font-size: 1.8em;
            }
            .aspect-title {
                font-size: 0.9em;
            }
            .cards-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 8px;
                max-height: 300px;
            }
            .choice-card {
                padding: 12px;
                font-size: 0.8em;
            }
            .choice-title {
                font-size: 1.3em;
            }
            .reflection-screen {
                padding: 15px;
                margin-top: 15px;
            }
            .instructions-grid {
                grid-template-columns: 1fr;
            }
            .instructions-aspects ul {
                flex-direction: column;
                align-items: center;
            }
            .category-selection {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="logos-transparent.png" alt="לוגואים של משרד החינוך, פיסכול חברתי ויסודי עכשיוי" class="logos-container">
            <h1 class="title">מסכמים ופותחים את הלב</h1>
            <p class="subtitle">פעילות שיח ושיתוף</p>
            <div class="small-hero-image-container">
                <img src="hart_image.png" alt="ידית בצורת לב על דלת" class="small-hero-image">
            </div>
        </div>
        
        <div id="gameContainer">
            <div class="instructions" id="mainInstructions">
                <h3>הוראות</h3>
                <div class="summary-info">
                    <div class="info-field">
                        <label for="summaryType">מסכמים - בחרו מתוך הרשימה:</label>
                        <select id="summaryType">
                            <option value="מחצית">מחצית</option>
                            <option value="פעילות">פעילות</option>
                            <option value="אירוע">אירוע</option>
                            <option value="תקופה">תקופה</option>
                            <option value="שנה">שנה</option>
                            <option value="חופשה">חופשה</option>
                        </select>
                    </div>
                </div>
                <div class="instructions-grid">
                    <div class="instruction-item">
                        <div class="instruction-number">1.</div>
                        <div class="instruction-text">בחרו באחת מקבוצות המילים: חוויות ואירועים או רגשות ותכונות</div>
                    </div>
                    <div class="instruction-item">
                        <div class="instruction-number">2.</div>
                        <div class="instruction-text">בחרו מילה שמעוררת אצלכם זיכרון או חוויה</div>
                    </div>
                    <div class="instruction-item">
                        <div class="instruction-number">3.</div>
                        <div class="instruction-text">חשבו על החוויה שהמילה מזכירה לכם</div>
                    </div>
                    <div class="instruction-item">
                        <div class="instruction-number">4.</div>
                        <div class="instruction-text">שתפו בחוויה והתייחסו לאחד ההיבטים</div>
                    </div>
                </div>
                <div class="instructions-aspects">
                    <ul>
                        <li>💭 רגש: מה הרגשתם? מה גרם לכם להרגיש כך?</li>
                        <li>🧠 מחשבה: מה חשבתם? מה הבנתם על עצמכם?</li>
                        <li>⚡ החלטה: מה החלטתם? לאילו מסקנות הגעתם?</li>
                        <li>🎯 התנהגות: כיצד התנהגתם? מה עשיתם?</li>
                    </ul>
                </div>
                <div class="instructions-controls">
                    <a href="index.html" class="back-button">חזרה לדף הראשי</a>
                </div>
            </div>
            
            <div class="category-selection" id="categorySelection">
                <div class="category-card" onclick="showCategoryCards('experiences')">
                    <h3>🌟 חוויות ואירועים</h3>
                    <div class="category-description">מילים המתייחסות לאירועים, פעילויות וחוויות שעברתם</div>
                    <div class="category-examples">דוגמאות: הצלחה, אתגר, כישלון, טיול, בית ספר</div>
                </div>
                <div class="category-card" onclick="showCategoryCards('emotions')">
                    <h3>💝 רגשות ותכונות</h3>
                    <div class="category-description">מילים המתארות רגשות, תחושות ותכונות אישיות</div>
                    <div class="category-examples">דוגמאות: שמחה, אמפתיה, בדידות, חמלה, יוזמה, אחריות</div>
                </div>
            </div>
            
            <div class="choice-screen" id="choiceScreen">
                <h2 class="choice-title">בחרו מילה מקבוצת: <span id="currentCategoryName"></span></h2>
                <div class="cards-grid" id="cardsGrid"></div>
                <div class="choice-controls">
                    <button class="back-button" onclick="backToModes()">חזרה לבחירת קבוצת מילים</button>
                </div>
            </div>
            
            <div class="card-display" id="cardDisplay">
                <div class="card card-back" id="currentCard" onclick="flipCard()">
                    לחצו כדי לחשוף את הקלף
                </div>
                <div class="control-buttons">
                    <button class="btn btn-primary" onclick="nextCard()">קלף הבא</button>
                    <button class="btn btn-secondary" onclick="showAllCards()">כל הקלפים</button>
                    <button class="btn btn-danger" onclick="resetGame()">איפוס משחק</button>
                </div>
            </div>
            
            <div class="reflection-screen" id="reflectionScreen">
                <div class="reflection-container">
                    <div class="word-circle">
                        <div class="word-text" id="reflectionWord"></div>
                    </div>

                    <div class="reflection-instruction">
                        ספרו בקצרה על החוויה או האירוע שמזכירה לכם המילה שבחרתם, לחצו על אחד או יותר מארבעת ההיבטים הבאים שעליהם השפיעה החוויה והתייחסו לשאלות בכרטיס.
                    </div>
                    
                    <div class="aspects-grid">
                        <div class="aspect-item" onclick="flipAspectCard(this)">
                            <div class="aspect-front">
                                <div class="aspect-icon">💭</div>
                                <div class="aspect-title">רגש</div>
                            </div>
                            <div class="aspect-back">
                                <div class="aspect-back-title">רגש</div>
                                <ul>
                                    <li>איך האירוע/החוויה הזאת גרמו לכם להרגיש?</li>
                                    <li>מה היה הרגש הכי חזק שחוויתם?</li>
                                    <li>איך הרגש הזה השפיע עליכם?</li>
                                </ul>
                            </div>
                        </div>
                        <div class="aspect-item" onclick="flipAspectCard(this)">
                            <div class="aspect-front">
                                <div class="aspect-icon">🧠</div>
                                <div class="aspect-title">מחשבה</div>
                            </div>
                            <div class="aspect-back">
                                <div class="aspect-back-title">מחשבה</div>
                                <ul>
                                    <li>על מה חשבתם כשזה קרה?</li>
                                    <li>מה למדתם על עצמכם?</li>
                                    <li>מה הבנתם מהחוויה הזאת?</li>
                                </ul>
                            </div>
                        </div>
                        <div class="aspect-item" onclick="flipAspectCard(this)">
                            <div class="aspect-front">
                                <div class="aspect-icon">⚡</div>
                                <div class="aspect-title">החלטה</div>
                            </div>
                            <div class="aspect-back">
                                <div class="aspect-back-title">החלטה</div>
                                <ul>
                                    <li>איזו החלטה קיבלתם?</li>
                                    <li>מה הביא אתכם להחליט כך?</li>
                                    <li>איך ההחלטה הזאת השפיעה עליכם?</li>
                                </ul>
                            </div>
                        </div>
                        <div class="aspect-item" onclick="flipAspectCard(this)">
                            <div class="aspect-front">
                                <div class="aspect-icon">🎯</div>
                                <div class="aspect-title">התנהגות</div>
                            </div>
                            <div class="aspect-back">
                                <div class="aspect-back-title">התנהגות</div>
                                <ul>
                                    <li>איך התנהגתם במצב הזה?</li>
                                    <li>מה עשיתם בפועל?</li>
                                    <li>איך ההתנהגות שלכם השפיעה על המצב?</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="reflection-controls">
                        <button class="btn btn-primary" onclick="nextCard()">קלף הבא</button>
                        <button class="back-button" onclick="backToCard()">חזרה לקלף</button>
                        <button class="btn btn-danger" onclick="resetGame()">איפוס משחק</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data for the different categories
        const cardData = {
            experiences: {
                name: 'חוויות ואירועים',
                cards: [
                    'הצלחה', 'אתגר', 'כישלון', 'טיול', 'בית ספר', 'חברות', 'תחרות', 'מבחן',
                    'פרויקט', 'הופעה', 'ספורט', 'שיעור', 'מסיבה',  'חופש', 'עבודה', 'התנדבות',
                    'ממ"ד', 'סדנה', 'מחנה', 'יום כיף', 'קבוצה', 'אזעקה', 'הצגה',  'למידה מרחוק', 'קונצרט', 'תערוכה',
                    'מפגש', 'יום מיוחד', 'מלחמה', 'חוויה', 'הרפתקה', 'גילוי'
                ]
            },
            emotions: {
                name: 'רגשות ותכונות',
                cards: [
                    'שמחה', 'אמפתיה', 'בדידות', 'חמלה', 'יוזמה', 'אחריות', 'גאווה', 'פחד',
                    'כעס', 'אהבה', 'תקווה', 'אכזבה', 'התרגשות', 'רגיעה', 'עצבות', 'אושר',
                    'דאגה', 'ביטחון', 'חרדה', 'שלווה', 'מוטיבציה', 'התלהבות', 'נחישות',
                    'סבלנות', 'אומץ', 'כן', 'נדיבות', 'צדק', 'יצירתיות', 'חוכמה'
                ]
            }
        };

        // Game state
        let gameState = {
            currentCategory: null,
            currentCards: [],
            currentCardIndex: 0,
            currentWord: null
        };

        function flipAspectCard(element) {
            const allAspectItems = document.querySelectorAll('.aspect-item');
            
            allAspectItems.forEach(item => {
                if (item !== element) {
                    item.classList.remove('is-flipped');
                }
            });

            element.classList.toggle('is-flipped');
        }

        function resetAspectCards() {
             document.querySelectorAll('.aspect-item').forEach(item => {
                item.classList.remove('is-flipped');
            });
        }

        // Show category cards
        function showCategoryCards(category) {
            gameState.currentCategory = category;
            gameState.currentCards = [...cardData[category].cards];
            gameState.currentCardIndex = 0;
            
            document.getElementById('currentCategoryName').textContent = cardData[category].name;
            document.getElementById('categorySelection').style.display = 'none';
            document.getElementById('mainInstructions').style.display = 'none';
            document.getElementById('choiceScreen').style.display = 'block';
            
            const cardsGrid = document.getElementById('cardsGrid');
            cardsGrid.innerHTML = '';
            
            gameState.currentCards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'choice-card';
                cardElement.textContent = card;
                cardElement.onclick = () => selectCard(card);
                cardsGrid.appendChild(cardElement);
            });
        }

        // Select a card
        function selectCard(word) {
            gameState.currentWord = word;
            
            document.getElementById('choiceScreen').style.display = 'none';
            document.getElementById('cardDisplay').style.display = 'block';
            
            const currentCard = document.getElementById('currentCard');
            currentCard.className = 'card card-back';
            currentCard.textContent = 'לחצו כדי לחשוף את הקלף';
        }

        // Flip card to show word
        function flipCard() {
            const currentCard = document.getElementById('currentCard');
            
            if (currentCard.classList.contains('card-back')) {
                currentCard.classList.add('flip-animation');
                
                setTimeout(() => {
                    currentCard.className = 'card';
                    currentCard.textContent = gameState.currentWord;
                    
                    setTimeout(() => {
                        showReflectionScreen();
                    }, 1000);
                }, 300);
            }
        }

        // Show reflection screen
        function showReflectionScreen() {
            document.getElementById('cardDisplay').style.display = 'none';
            document.getElementById('reflectionScreen').style.display = 'block';
            document.getElementById('reflectionWord').textContent = gameState.currentWord;
            
            resetAspectCards(); 
        }

        // Next card
        function nextCard() {
            const currentWordIndex = gameState.currentCards.indexOf(gameState.currentWord);
            if (currentWordIndex > -1) {
                gameState.currentCards.splice(currentWordIndex, 1);
            }
            
            if (gameState.currentCards.length === 0) {
                alert('כל הקלפים נגמרו! בחרו קטגוריה חדשה או איפסו את המשחק.');
                resetGame();
                return;
            }
            
            document.getElementById('reflectionScreen').style.display = 'none';
            document.getElementById('cardDisplay').style.display = 'none';
            document.getElementById('choiceScreen').style.display = 'block';
            
            const cardsGrid = document.getElementById('cardsGrid');
            cardsGrid.innerHTML = '';
            
            gameState.currentCards.forEach(card => {
                const cardElement = document.createElement('div');
                cardElement.className = 'choice-card';
                cardElement.textContent = card;
                cardElement.onclick = () => selectCard(card);
                cardsGrid.appendChild(cardElement);
            });
        }

        // Show all available cards
        function showAllCards() {
            document.getElementById('cardDisplay').style.display = 'none';
            document.getElementById('reflectionScreen').style.display = 'none';
            document.getElementById('choiceScreen').style.display = 'block';
            resetAspectCards();
        }

        // Back to card from reflection
        function backToCard() {
            document.getElementById('reflectionScreen').style.display = 'none';
            document.getElementById('cardDisplay').style.display = 'block';
            
            const currentCard = document.getElementById('currentCard');
            currentCard.className = 'card';
            currentCard.textContent = gameState.currentWord;
            resetAspectCards();
        }

        // Back to category selection
        function backToModes() {
            document.getElementById('choiceScreen').style.display = 'none';
            document.getElementById('cardDisplay').style.display = 'none';
            document.getElementById('reflectionScreen').style.display = 'none';
            document.getElementById('categorySelection').style.display = 'grid';
            document.getElementById('mainInstructions').style.display = 'block';
        }

        // Reset game
        function resetGame() {
            gameState = {
                currentCategory: null,
                currentCards: [],
                currentCardIndex: 0,
                currentWord: null
            };
            
            document.getElementById('choiceScreen').style.display = 'none';
            document.getElementById('cardDisplay').style.display = 'none';
            document.getElementById('reflectionScreen').style.display = 'none';
            document.getElementById('categorySelection').style.display = 'grid';
            document.getElementById('mainInstructions').style.display = 'block';
            resetAspectCards();
        }

        function initGame() {
            document.getElementById('mainInstructions').style.display = 'block';
            document.getElementById('categorySelection').style.display = 'grid';
            document.getElementById('choiceScreen').style.display = 'none';
            document.getElementById('cardDisplay').style.display = 'none';
            document.getElementById('reflectionScreen').style.display = 'none';
        }
        
        window.addEventListener('load', initGame);
    </script>
</body>
</html>